!function(h){"use strict";h(document).ready(function(){var d,y=h(".yz-giphy-submit-search").text(),l='<div class="yz-giphy-grid-sizer"></div>',r=h(".yz-load-more-giphys").text(),n=(h(".yz-selected-giphy-item"),{itemSelector:".yz-giphy-item",columnWidth:".yz-giphy-grid-sizer",percentPosition:!0,gutter:10}),s=!1;h(document).on("click",".yz-delete-giphy-item",function(){var i=h(this).closest("form");i.find(".yz-selected-giphy-item").fadeOut(400,function(){h(this).find("img").remove(),h(this).find("input").val(""),i.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeIn(200,function(){d=i.find(".yz-giphy-items-content").masonry(n)})})}),h(document).on("click",".yz-giphy-item img",function(i){if(!0!==s){s=!0;var t=h(this).attr("data-original"),e=h(this).closest("form"),a=e.find(".yz-selected-giphy-item");e.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeOut(400,function(){e.find(".yz-giphy-loading-preview").fadeIn(),a.find("input").val(t);var i=h("<img>").attr({src:t});a.prepend(i),h(i).on("load",function(i){e.find(".yz-giphy-loading-preview").fadeOut(100,function(){a.fadeIn().css("display","inline-block"),s=!1})})})}}),h(document).on("click",".yz-giphy-submit-search","click",function(){var i=h(this).closest("form"),t=i.find(".yz-giphy-submit-search"),e=h(this).prev(".yz-giphy-search-input").val(),a=i.find(".yz-load-more-giphys");a.fadeOut(1),a.attr("data-query",e),a.attr("data-page",2),i.find(".yz-giphy-items-content").html(l),d=i.find(".yz-giphy-items-content").masonry(n),""!=e&&(t.addClass("loading"),t.html('<i class="fas fa-spin fa-spinner"></i>'),h.yz_LoadGiphyItems(i,{q:e}))}),h(document).on("keypress",".yz-giphy-search-input",function(i){13==i.keyCode&&(i.preventDefault(),h(this).closest("form").find(".yz-giphy-submit-search").click())}),h(document).on("click",".yz-load-more-giphys",function(i){var t=h(this).closest("form"),e=t.find(".yz-load-more-giphys");e.addClass("loading"),e.html('<i class="fas fa-spinner fa-spin"></i>');var a=parseInt(h(this).attr("data-page")),n={q:h(this).attr("data-query"),offset:a*Yz_Wall.giphy_limit-2};h.yz_LoadGiphyItems(t,n);h(this).attr("data-page",a+1)}),h.fn.yz_giphy_masonryImagesReveal=function(e,i,a){var n=e.find(".yz-giphy-submit-search"),s=e.find(".yz-load-more-giphys"),o=this.data("masonry"),d=o.options.itemSelector;return i.hide(),this.append(i),i.imagesLoaded().progress(function(i,t){h(t.img).parents(d).show(1,function(){o.appended(h(this)),1==a&&s.fadeIn(),n.hasClass("loading")&&(n.removeClass("loading"),n.html(y)),s.hasClass("loading")&&(s.removeClass("loading"),s.html(r))}),e.find(".yz-giphy-items-content").animate({scrollTop:e.find(".yz-giphy-items-content").prop("scrollHeight")},1e3)}),this},h.yz_LoadGiphyItems=function(e,i){var a,n,s=h.extend({api_key:"aFFKTuSMjd6j0wwjpFCPXZipQbcnw3vB",limit:Yz_Wall.giphy_limit,fmt:"json",rating:"g"},i),o="";h.ajax({url:"https://api.giphy.com/v1/gifs/search?"+h.param(s),method:"GET",success:function(i){if(0!==i.data.length){for(void 0===s.offset&&e.find(".yz-giphy-items-content").html(l),a=0;a<s.limit;a++){var t=i.data[a].images;o+='<div class="yz-giphy-item"><img src="'+t.fixed_height.url+'" data-original="'+t.original.url+'"></div>'}n=i.pagination.total_count>s.limit,d.yz_giphy_masonryImagesReveal(e,h(o),n)}}})}})}(jQuery);